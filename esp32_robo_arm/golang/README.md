# Robot Arm Go Backend

Go –≤–µ—Ä—Å–∏—è backend –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è ESP32 —Ä–æ–±–æ—Ç–æ–º-—Ä—É–∫–æ–π —á–µ—Ä–µ–∑ Bluetooth Low Energy.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **BLE –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ** –∫ ESP32 —Ä–æ–±–æ—Ç—É
- ‚úÖ **WebSocket API** –¥–ª—è React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è  
- ‚úÖ **REST API** –¥–ª—è –±–∞–∑–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ—Ç–æ—Ä–∞–º–∏** (–¥–≤–∏–∂–µ–Ω–∏–µ, –æ—Å—Ç–∞–Ω–æ–≤–∫–∞)
- ‚úÖ **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–∑–¥–∞—á–∞** React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ **CORS –ø–æ–¥–¥–µ—Ä–∂–∫–∞** –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
golang/
‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îî‚îÄ‚îÄ server/
‚îÇ       ‚îî‚îÄ‚îÄ main.go          # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ —Å–µ—Ä–≤–µ—Ä–∞
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ ble/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ controller.go    # BLE –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Ä–æ–±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ handlers.go      # HTTP handlers
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ websocket.go     # WebSocket handlers
‚îÇ   ‚îî‚îÄ‚îÄ models/
‚îÇ       ‚îî‚îÄ‚îÄ types.go         # –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ go.mod
‚îú‚îÄ‚îÄ go.sum
‚îî‚îÄ‚îÄ README.md
```

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
cd golang
go mod tidy
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
```bash
go run cmd/server/main.go
```

### 3. –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- **React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**: http://localhost:8000/
- **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: http://localhost:8000/api/status
- **WebSocket**: ws://localhost:8000/ws

## üîå API Endpoints

### REST API
- `GET /api/status` - —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞
- `POST /api/connect` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Ä–æ–±–æ—Ç—É
- `POST /api/disconnect` - –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç —Ä–æ–±–æ—Ç–∞
- `POST /api/motor` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ—Ç–æ—Ä–æ–º
- `POST /api/stop-all` - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –º–æ—Ç–æ—Ä–æ–≤
- `GET /api/robot-info` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–æ–±–æ—Ç–µ

### WebSocket Commands
- `connect` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Ä–æ–±–æ—Ç—É
- `disconnect` - –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç —Ä–æ–±–æ—Ç–∞
- `move_motor` - –¥–≤–∏–∂–µ–Ω–∏–µ –º–æ—Ç–æ—Ä–∞
- `stop_motor` - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ—Ç–æ—Ä–∞
- `stop_all` - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –º–æ—Ç–æ—Ä–æ–≤
- `get_status` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞

## üì° BLE –ù–∞—Å—Ç—Ä–æ–π–∫–∏

```go
const (
    SERVICE_UUID       = "12345678-1234-1234-1234-123456789abc"
    CHARACTERISTIC_UUID = "87654321-4321-4321-4321-cba987654321"
    DEVICE_NAME        = "ESP32-RobotArm"
)
```

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### REST API
```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Ä–æ–±–æ—Ç—É
curl -X POST http://localhost:8000/api/connect

# –î–≤–∏–∂–µ–Ω–∏–µ –º–æ—Ç–æ—Ä–∞
curl -X POST http://localhost:8000/api/motor \
  -H "Content-Type: application/json" \
  -d '{"motor": 0, "direction": "forward", "speed": 200}'

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –º–æ—Ç–æ—Ä–æ–≤
curl -X POST http://localhost:8000/api/stop-all
```

### WebSocket
```javascript
const ws = new WebSocket('ws://localhost:8000/ws');

// –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Ä–æ–±–æ—Ç—É
ws.send(JSON.stringify({command: 'connect'}));

// –î–≤–∏–∂–µ–Ω–∏–µ –º–æ—Ç–æ—Ä–∞
ws.send(JSON.stringify({
    command: 'move_motor',
    motor: 0,
    direction: 'forward',
    speed: 200
}));
```

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
go get github.com/package/name
go mod tidy
```

### –°–±–æ—Ä–∫–∞ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞
```bash
go build -o robot-arm-server cmd/server/main.go
```

### –ó–∞–ø—É—Å–∫ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞
```bash
./robot-arm-server
```

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–ó–∞–¥–µ—Ä–∂–∫–∞ BLE**: ~2-10ms
- **–ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏**: ~5-15MB
- **–†–∞–∑–º–µ—Ä –±–∏–Ω–∞—Ä–Ω–∏–∫–∞**: ~5-20MB
- **CPU –Ω–∞–≥—Ä—É–∑–∫–∞**: –ù–∏–∑–∫–∞—è

## üÜö –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å Python –≤–µ—Ä—Å–∏–µ–π

| –ü–∞—Ä–∞–º–µ—Ç—Ä | Python | Go |
|----------|--------|----|
| –ó–∞–¥–µ—Ä–∂–∫–∞ | 50-100ms | 2-10ms |
| –ü–∞–º—è—Ç—å | 50-100MB | 5-15MB |
| –†–∞–∑–º–µ—Ä | N/A | 5-20MB |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–∞—è |
| –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ | –°–ª–æ–∂–Ω–æ–µ | –ü—Ä–æ—Å—Ç–æ–µ |
