# üîß –ê–Ω–∞–ª–∏–∑ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è `calibrated_robot_arm.py`

## üîç –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

### **1. ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è (—Å—Ç—Ä–æ–∫–∏ 123-130)**

```python
# –°–¢–ê–†–ê–Ø –õ–û–ì–ò–ö–ê (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è):
if percentage <= 0.5:
    # –î–≤–∏–∂–µ–Ω–∏–µ –≤–ø–µ—Ä–µ–¥ (–∫ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–º—É –ø–æ–ª–æ–∂–µ–Ω–∏—é) ‚ùå
    target_time = int(return_time * percentage * 2 * 1000)
    direction = "forward"
else:
    # –î–≤–∏–∂–µ–Ω–∏–µ –Ω–∞–∑–∞–¥ (–∫ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–º—É –ø–æ–ª–æ–∂–µ–Ω–∏—é) ‚ùå
    target_time = int(backward_time * (percentage - 0.5) * 2 * 1000)
    direction = "backward"
```

**–ü—Ä–æ–±–ª–µ–º—ã:**

- –õ–æ–≥–∏–∫–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–≤–∏–∂–µ–Ω–∏—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è
- –ù–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é –º–æ—Ç–æ—Ä–∞
- –í—Å–µ–≥–¥–∞ –≤—ã—á–∏—Å–ª—è–µ—Ç –ø–æ–ª–Ω–æ–µ –≤—Ä–µ–º—è –¥–≤–∏–∂–µ–Ω–∏—è
- –ù–µ—Ç–æ—á–Ω—ã–µ —Ñ–æ—Ä–º—É–ª—ã —Ä–∞—Å—á–µ—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏

### **2. ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π**

```python
# –ü–†–û–ë–õ–ï–ú–ê: –ö–ª–∞—Å—Å –Ω–µ –∑–Ω–∞–µ—Ç —Ç–µ–∫—É—â–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –º–æ—Ç–æ—Ä–æ–≤
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é
```

### **3. ‚ùå –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–µ–∫—É—â–µ–π –ø–æ–∑–∏—Ü–∏–∏**

```python
# –ü–†–û–ë–õ–ï–ú–ê: –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ "—É–∂–µ –ª–∏ –º—ã –≤ –Ω—É–∂–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏?"
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –ª–∏—à–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è –º–æ—Ç–æ—Ä–æ–≤
```

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

### **1. –î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π**

```python
def __init__(self, calibration_file: str = None):
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...

    # –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ç–µ–∫—É—â–∏—Ö –ø–æ–∑–∏—Ü–∏–π –º–æ—Ç–æ—Ä–æ–≤
    self.current_positions = {0: 0.0, 1: 0.0, 2: 0.0}
```

### **2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è**

```python
async def move_to_percentage(self, motor: int, percentage: float, speed: int = 150):
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –Ω–∞—Ö–æ–¥–∏–º—Å—è –ª–∏ –º—ã —É–∂–µ –≤ —Ü–µ–ª–µ–≤–æ–π –ø–æ–∑–∏—Ü–∏–∏
    current_pos = self.current_positions[motor]
    position_tolerance = 0.02  # 2% —Ç–æ–ª–µ—Ä–∞–Ω—Ç–Ω–æ—Å—Ç—å
    if abs(percentage - current_pos) <= position_tolerance:
        print(f"Motor {motor} already at position {percentage*100:.1f}%")
        return True

    # –í—ã—á–∏—Å–ª—è–µ–º –≤—Ä–µ–º—è –¥–≤–∏–∂–µ–Ω–∏—è –æ—Ç —Ç–µ–∫—É—â–µ–π –ø–æ–∑–∏—Ü–∏–∏ –∫ —Ü–µ–ª–µ–≤–æ–π
    if percentage > current_pos:
        # –î–≤–∏–∂–µ–Ω–∏–µ –∫ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ (backward)
        distance = percentage - current_pos
        target_time = int(backward_time * distance * 1000)
        direction = "backward"
    else:
        # –î–≤–∏–∂–µ–Ω–∏–µ –∫ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ (forward)
        distance = current_pos - percentage
        target_time = int(return_time * distance * 1000)
        direction = "forward"

    # –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è
    if result:
        self.current_positions[motor] = percentage
```

### **3. –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã**

```python
def reset_positions(self):
    """–°–±—Ä–æ—Å–∏—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π –º–æ—Ç–æ—Ä–æ–≤"""
    self.current_positions = {0: 0.0, 1: 0.0, 2: 0.0}

def get_current_position(self, motor: int) -> float:
    """–ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é –º–æ—Ç–æ—Ä–∞"""
    return self.current_positions.get(motor, 0.0)

def show_current_positions(self):
    """–ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –≤—Å–µ—Ö –º–æ—Ç–æ—Ä–æ–≤"""
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏–∏ –≤—Å–µ—Ö –º–æ—Ç–æ—Ä–æ–≤
```

### **4. –û–±–Ω–æ–≤–ª–µ–Ω –º–µ—Ç–æ–¥ move_to_position**

```python
# –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—É—â–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è
for motor_key, percentage in position.items():
    motor_num = int(motor_key.split("_")[1])
    if self.is_motor_calibrated(motor_num):
        self.current_positions[motor_num] = percentage
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

### **–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

```bash
# –ü–µ—Ä–≤—ã–π —Ä–∞–∑
set 0 100  # –ú–æ—Ç–æ—Ä –∫—Ä—É—Ç–∏—Ç—Å—è –ø–æ–ª–Ω–æ–µ –≤—Ä–µ–º—è –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏

# –í—Ç–æ—Ä–æ–π —Ä–∞–∑
set 0 100  # –ú–æ—Ç–æ—Ä —Å–Ω–æ–≤–∞ –∫—Ä—É—Ç–∏—Ç—Å—è –ø–æ–ª–Ω–æ–µ –≤—Ä–µ–º—è! ‚ùå
```

### **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

```bash
# –ü–µ—Ä–≤—ã–π —Ä–∞–∑
set 0 100  # –ú–æ—Ç–æ—Ä –∫—Ä—É—Ç–∏—Ç—Å—è –ø–æ–ª–Ω–æ–µ –≤—Ä–µ–º—è –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏

# –í—Ç–æ—Ä–æ–π —Ä–∞–∑
set 0 100  # "Motor 0 already at position 100.0%" ‚úÖ
```

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

‚úÖ **–¢–æ—á–Ω–æ—Å—Ç—å** - –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–≤–∏–∂–µ–Ω–∏—è  
‚úÖ **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–π –ø–æ–∑–∏—Ü–∏–∏ –ø–µ—Ä–µ–¥ –¥–≤–∏–∂–µ–Ω–∏–µ–º  
‚úÖ **–≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏** - –Ω–µ –∫—Ä—É—Ç–∏–º –º–æ—Ç–æ—Ä—ã –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏  
‚úÖ **–ó–∞—â–∏—Ç–∞ –æ—Ç –∏–∑–Ω–æ—Å–∞** - –º–µ–Ω—å—à–µ –Ω–µ–Ω—É–∂–Ω—ã—Ö –¥–≤–∏–∂–µ–Ω–∏–π  
‚úÖ **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ** - –∫–ª–∞—Å—Å –∑–Ω–∞–µ—Ç —Ç–µ–∫—É—â–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –º–æ—Ç–æ—Ä–æ–≤  
‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å** - –º–µ—Ç–æ–¥—ã –¥–ª—è —Å–±—Ä–æ—Å–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π

## üìä –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

```python
# –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞
robot = CalibratedRobotArm()

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–∏—Ö –ø–æ–∑–∏—Ü–∏–π
robot.show_current_positions()

# –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–æ—Ç–æ—Ä–∞
pos = robot.get_current_position(0)

# –°–±—Ä–æ—Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π
robot.reset_positions()

# –î–≤–∏–∂–µ–Ω–∏–µ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π
await robot.move_to_percentage(0, 0.5)  # –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
```

–¢–µ–ø–µ—Ä—å –∫–ª–∞—Å—Å `CalibratedRobotArm` —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–º–Ω–æ–≥–æ —É–º–Ω–µ–µ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ!
